{"ast":null,"code":"import { authAPI } from \"../api/todolists-api\";\nimport { setIsLoggedInAC } from \"../features/Login/auth-reducer\";\nimport { createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  status: 'idle',\n  error: null,\n  isInitialized: false\n};\nconst slice = createSlice({\n  name: \"app\",\n  initialState: initialState,\n  reducers: {\n    setIsLoggedInAC(state, action) {\n      state.isLoggedIn = action.payload.value;\n    }\n\n  }\n});\nexport const appReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'APP/SET-STATUS':\n      return { ...state,\n        status: action.status\n      };\n\n    case 'APP/SET-ERROR':\n      return { ...state,\n        error: action.error\n      };\n\n    case 'APP/SET-IS-INITIALIZED':\n      return { ...state,\n        isInitialized: action.value\n      };\n\n    default:\n      return { ...state\n      };\n  }\n};\nexport const setAppErrorAC = error => ({\n  type: 'APP/SET-ERROR',\n  error\n});\nexport const setAppStatusAC = status => ({\n  type: 'APP/SET-STATUS',\n  status\n});\nexport const setAppInitializedAC = value => ({\n  type: 'APP/SET-IS-INITIALIZED',\n  value\n});\nexport const initializedAppTC = () => dispatch => {\n  authAPI.me().then(res => {\n    if (res.data.resultCode === 0) {\n      dispatch(setIsLoggedInAC({\n        value: true\n      }));\n    } else {}\n\n    dispatch(setAppInitializedAC(true));\n  });\n};","map":{"version":3,"sources":["D:/programming/ToDoListDimych/todolist/src/app/app-reducer.ts"],"names":["authAPI","setIsLoggedInAC","createSlice","initialState","status","error","isInitialized","slice","name","reducers","state","action","isLoggedIn","payload","value","appReducer","type","setAppErrorAC","setAppStatusAC","setAppInitializedAC","initializedAppTC","dispatch","me","then","res","data","resultCode"],"mappings":"AACA,SAAQA,OAAR,QAAsB,sBAAtB;AACA,SAAQC,eAAR,QAA8B,gCAA9B;AACA,SAAQC,WAAR,QAAyC,kBAAzC;AAEA,MAAMC,YAA8B,GAAG;AACnCC,EAAAA,MAAM,EAAE,MAD2B;AAEnCC,EAAAA,KAAK,EAAE,IAF4B;AAGnCC,EAAAA,aAAa,EAAE;AAHoB,CAAvC;AAMA,MAAMC,KAAK,GAAGL,WAAW,CAAC;AACtBM,EAAAA,IAAI,EAAE,KADgB;AAEtBL,EAAAA,YAAY,EAAEA,YAFQ;AAGtBM,EAAAA,QAAQ,EAAE;AACNR,IAAAA,eAAe,CAACS,KAAD,EAAQC,MAAR,EAAmD;AAC9DD,MAAAA,KAAK,CAACE,UAAN,GAAmBD,MAAM,CAACE,OAAP,CAAeC,KAAlC;AACH;;AAHK;AAHY,CAAD,CAAzB;AAUA,OAAO,MAAMC,UAAU,GAAG,CAACL,KAAuB,GAAGP,YAA3B,EAAyCQ,MAAzC,KAAmF;AACzG,UAAQA,MAAM,CAACK,IAAf;AACI,SAAK,gBAAL;AACI,aAAO,EAAC,GAAGN,KAAJ;AAAWN,QAAAA,MAAM,EAAEO,MAAM,CAACP;AAA1B,OAAP;;AACJ,SAAK,eAAL;AACI,aAAO,EAAC,GAAGM,KAAJ;AAAWL,QAAAA,KAAK,EAAEM,MAAM,CAACN;AAAzB,OAAP;;AACJ,SAAK,wBAAL;AACI,aAAO,EAAC,GAAGK,KAAJ;AAAWJ,QAAAA,aAAa,EAAEK,MAAM,CAACG;AAAjC,OAAP;;AACJ;AACI,aAAO,EAAC,GAAGJ;AAAJ,OAAP;AARR;AAUH,CAXM;AAsBP,OAAO,MAAMO,aAAa,GAAIZ,KAAD,KAA2B;AAACW,EAAAA,IAAI,EAAE,eAAP;AAAwBX,EAAAA;AAAxB,CAA3B,CAAtB;AACP,OAAO,MAAMa,cAAc,GAAId,MAAD,KAAgC;AAACY,EAAAA,IAAI,EAAE,gBAAP;AAAyBZ,EAAAA;AAAzB,CAAhC,CAAvB;AACP,OAAO,MAAMe,mBAAmB,GAAIL,KAAD,KAAqB;AAACE,EAAAA,IAAI,EAAE,wBAAP;AAAiCF,EAAAA;AAAjC,CAArB,CAA5B;AAEP,OAAO,MAAMM,gBAAgB,GAAG,MAAOC,QAAD,IAAwB;AAC1DrB,EAAAA,OAAO,CAACsB,EAAR,GAAaC,IAAb,CAAkBC,GAAG,IAAI;AACrB,QAAIA,GAAG,CAACC,IAAJ,CAASC,UAAT,KAAwB,CAA5B,EAA+B;AAC3BL,MAAAA,QAAQ,CAACpB,eAAe,CAAC;AAACa,QAAAA,KAAK,EAAE;AAAR,OAAD,CAAhB,CAAR;AACH,KAFD,MAEO,CAEN;;AACDO,IAAAA,QAAQ,CAACF,mBAAmB,CAAC,IAAD,CAApB,CAAR;AACH,GAPD;AAQH,CATM","sourcesContent":["import {Dispatch} from \"redux\";\r\nimport {authAPI} from \"../api/todolists-api\";\r\nimport {setIsLoggedInAC} from \"../features/Login/auth-reducer\";\r\nimport {createSlice, PayloadAction} from \"@reduxjs/toolkit\";\r\n\r\nconst initialState: InitialStateType = {\r\n    status: 'idle',\r\n    error: null,\r\n    isInitialized: false\r\n}\r\n\r\nconst slice = createSlice({\r\n    name: \"app\",\r\n    initialState: initialState,\r\n    reducers: {\r\n        setIsLoggedInAC(state, action: PayloadAction<{ value: boolean }>) {\r\n            state.isLoggedIn = action.payload.value;\r\n        }\r\n    }\r\n})\r\n\r\nexport const appReducer = (state: InitialStateType = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'APP/SET-STATUS':\r\n            return {...state, status: action.status}\r\n        case 'APP/SET-ERROR':\r\n            return {...state, error: action.error}\r\n        case 'APP/SET-IS-INITIALIZED' :\r\n            return {...state, isInitialized: action.value}\r\n        default:\r\n            return {...state}\r\n    }\r\n}\r\n\r\nexport type RequestStatusType = 'idle' | 'loading' | 'succeeded' | 'failed'\r\nexport type InitialStateType = {\r\n    // происходит ли сейчас взаимодействие с сервером\r\n    status: RequestStatusType\r\n    // если ошибка какая-то глобальная произойдёт - мы запишем текст ошибки сюда\r\n    error: string | null\r\n    isInitialized: boolean\r\n}\r\n\r\nexport const setAppErrorAC = (error: string | null) => ({type: 'APP/SET-ERROR', error} as const)\r\nexport const setAppStatusAC = (status: RequestStatusType) => ({type: 'APP/SET-STATUS', status} as const)\r\nexport const setAppInitializedAC = (value: boolean) => ({type: 'APP/SET-IS-INITIALIZED', value} as const)\r\n\r\nexport const initializedAppTC = () => (dispatch: Dispatch) => {\r\n    authAPI.me().then(res => {\r\n        if (res.data.resultCode === 0) {\r\n            dispatch(setIsLoggedInAC({value: true}))\r\n        } else {\r\n\r\n        }\r\n        dispatch(setAppInitializedAC(true))\r\n    })\r\n}\r\n\r\nexport type SetAppErrorActionType = ReturnType<typeof setAppErrorAC>\r\nexport type SetAppStatusActionType = ReturnType<typeof setAppStatusAC>\r\n\r\ntype ActionsType =\r\n    | SetAppErrorActionType\r\n    | SetAppStatusActionType\r\n    | ReturnType<typeof setAppInitializedAC>\r\n"]},"metadata":{},"sourceType":"module"}